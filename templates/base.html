{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Edgar Search Tool</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	<script src="https://code.jquery.com/jquery-1.11.3.js"></script>
</head>

<body>
<div class="container">
	<section class="top input">
		<div class="row">
			<div class="col-md-4">
				<h2>Edgar Search</h2>
				<form action="." method="POST">
					{% csrf_token %}
					{{ form.as_p }}
					<input type="submit" value="Search"></input>
				</form>
			</div>
		</div>
	</section>
	{% if resp %}
	<hr />
	<section class="results">
		<div class="row">
		<div class="col-md-6">
			<table>
			<thead>
				<tr>
					<th>Filing</th>
					<th>Filing Date</th>
					<th>Item #</th>
					<th>Description</th>
					<th>Content</th>
				</tr>
			</thead>
			<tbody>
				{% for i in resp %}
				<tr>
					<td>{{ i.filing }}</td>
					<td>{{ i.filing_date }}</td>
					<td>{{ i.item_no }}</td>
					<td>{{ i.item_desc }}</td>
					<td>
						<a href="#" class="content-display">Show</a>
						<div style="display: none;" class="content-item">
							{{ i.content }}
						</div>
					</td>
				</tr>
				{% endfor %}
			</tbody>
			</table>
		</div>
		<div class="col-md-6 right-col">
		</div>
		</div>
	</section>
	{% endif %}
</div>
<script type="text/javascript">
$('a.content-display').click( function (e) {
	e.preventDefault();
	var content = $(this).parents('td').find('.content-item').html();
	var $rightCol = $('.right-col');
	console.log(content);
	$rightCol.html(content); 
})
</script>

</body>
</html>